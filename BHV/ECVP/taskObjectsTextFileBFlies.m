%BHV write to text trial info for correct trials
%taskObjectsTextFileBFlies
filename = 'NovelTarget';

Header = { 'Fixation\\Cue',...
    'Target_Absent_Button',...
    'Target\\Distractor',...
    'Distractor 1',...
    'Distractor 2',...
    'Distractor 3',...
    'Distractor 4',...
    'Distractor 5',...
    'Distractor 6',...
    'Distractor 7' };

NovelTarget = { 'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Interleaved-Peanut-06-27-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Interleaved-Peanut-06-28-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Interleaved-Peanut-06-30-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Interleaved-Peanut-07-01-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Interleaved-Peanut-07-02-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Interleaved-Peanut-07-03-2016.bhv' };


Interleaved = { 'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Interleaved-Peanut-06-17-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Interleaved-Peanut-06-20-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Interleaved-Peanut-06-21-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Interleaved-Peanut-06-22-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Interleaved-Peanut-06-23-2016.bhv'};

Cued = { 'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Exemplar-Peanut-06-03-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Exemplar-Peanut-06-06-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Exemplar-Peanut-06-07-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Exemplar-Peanut-06-08-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Exemplar-Peanut-06-09-2016.bhv'};

UnCued = { 'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_UnCued-Peanut-06-16-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_UnCued-Peanut-06-15-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_UnCued-Peanut-06-14-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_UnCued-Peanut-06-13-2016.bhv',...
    'C:\Users\Public\Documents\BHV\CatSearch_Bflies\catSearch_MultiArray_Exemplar-Peanut-06-10-2016.bhv'};
%a cell array of bhv files to go through

Fixation_TaskObjectNum = 3;


fid = fopen( filename, 'w+' );
for aa = 1:length(Header)
    fprintf( fid, '%s\t', Header{aa} );
end
fprintf(fid, '\n' );


for ii = 1:length( NovelTarget )
    %for each bhv file
    
    %BHV = bhv_read1701(  [Interleaved{ ii }]  );
    BHV = bhv_read1701
    %read the file
    
    correct_idx = find( BHV.TrialError == 0 );
    num_correct = length(correct_idx)  
    
    for jj = 1:size(BHV.AnalogData,2)
        
        if BHV.TrialError(jj) == 0
            %for each correct trial print tab delimited line to a text file with the
            %fprintf( fid, '%s\n', BHV.TaskObject{BHV.ConditionNumber(jj),Fixation_TaskObjectNum} )
            for hh = 1:length(BHV.TaskObject(BHV.ConditionNumber(jj),...
                    Fixation_TaskObjectNum:end))                                    
                if ~isempty(BHV.TaskObject{BHV.ConditionNumber(jj),...
                        hh+(Fixation_TaskObjectNum-1)})
                    fprintf( fid, '%s\t', BHV.TaskObject{BHV.ConditionNumber(jj),hh+(Fixation_TaskObjectNum-1)} );
                    %add a tab delimited field with this taskObject to the current line                            
                end
            end
            fprintf(fid, '\n' );
        end
        
    end
    
    %trial objects
    
end